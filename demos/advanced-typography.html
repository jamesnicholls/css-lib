<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; utf-8">
    <title>Advanced typography example</title>
    <link href="../css/reset.css" type="text/css" rel="stylesheet">
    <link href="../css/vertical-rhythm.css" type="text/css" rel="stylesheet">
    <link href="../css/typography.css" type="text/css" rel="stylesheet">
    <style type = "text/css">
      body {
        font-family: Palatino, Georgia, sans-serif;
        font-size: 14px;
      }
      
      .manuscript {
        font-size: 14px;
        line-height: 21px;
        margin-bottom: 1.5em;
      }
      
      .number {
        font-size: 16px;
      }
    </style>
    <script src="../js/cufon-yui.js" type="text/javascript"></script>
    <script src="typography/ArnoPro_textfigures.font.js" type="text/javascript"></script>
    <script src="../js/textresizedetector.js" type="text/javascript"></script>
    <script type="text/javascript">
      // TODO Move this to a separate script
      Cufon.replace('.number');
      
      TextResizeDetector.TARGET_ELEMENT_ID = 'bod';
      TextResizeDetector.USER_INIT_FUNC = init;
      function init(){
            var iBase = TextResizeDetector.addEventListener(onFontResize, null );
      }
      
      function onFontResize() {
        Cufon.refresh('.number');
      }
      
    </script>
  </head>

  <body id="bod">
    <div class="mod">
      <div class="hdr"></div>
      <h1>Heading 1: <span class="number">28</span><span class="ord">th</span></h1>
      <h2>Stuff <span class="amp">&amp;</span> nonsense</h2>
      <div class="content manuscript">
        <p>This is the second version of the typography framework. <abbr title="Internet Explorer">IE</abbr> doesn't support the inherit value or resize fonts sized in pixels, making the first attempt pretty useless. However, <abbr title="Interner Explorer">IE</abbr> does support dynamic expressions, so by using percentages for our font-size and converting it to an integer with Javascript, we can then define a margin for our headings and paragraph elements.</p>
        <p>Unfortunately, it wasn't as easy as all that. <del>The whole point of the framework was to create a style sheet where the base font-size, line-height and bottom margin could be updated once and all the elements would inherit the calculated values</del>In order to convert the percentage to an integer, we must divide it by <span class="number">100</span> (which gives us a decimal point equivalent) and then multiply this by the browser's default font-size. I know that this is, by default, <span class="number">16</span>px. But if the user changes the default font-size, then what?</p>
        <p>I did a lot of Googling and tried a few different things to determine the browser's font-size but to no avail. The solution was based on an article at A List Apart. It involves placing a container div around the content and putting all our <abbr title="Cascading Style Sheets">CSS</abbr> styling on that, leaving the body untouched. That way we can get browser's default font-size from the body.</p>
        <p>Unfortunately, <abbr title="Internet Explorer">IE</abbr> calculates the browser base font-size in points. So I did another quick Google and found out that a pixel is roughly <span class="fraction"><span class="numerator">1</span>&frasl;<span class="denominator">75</span></span> of a point. So if we divide our base font-size by .<span class="number">75</span> and multiple it by our container's font-size (which has been divided by <span class="number">100</span> to give us a fraction) we get the container's computed font-size. We can then multiply this number by the margin and line-height to calculate what values our child elements should get.</p> 
        <blockquote cite="http://www.nowhere.com/example.php">
          <p>A quote from nowhere in particular.</p>
          <p>The last paragraph.</p>
        </blockquote>
      </div>
      <div class="ftr"></div>
    </div>
  </body>
</html>
